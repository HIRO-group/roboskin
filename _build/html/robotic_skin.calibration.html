

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>robotic_skin.calibration package &mdash; robotic_skin  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="robotic_skin.sensor package" href="robotic_skin.sensor.html" />
    <link rel="prev" title="robotic_skin.algorithm package" href="robotic_skin.algorithm.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> robotic_skin
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="robotic_skin.html">robotic_skin package</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="robotic_skin.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="robotic_skin.algorithm.html">robotic_skin.algorithm package</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">robotic_skin.calibration package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-robotic_skin.calibration.accel_position">robotic_skin.calibration.accel_position module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-robotic_skin.calibration.utils">robotic_skin.calibration.utils module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-robotic_skin.calibration">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="robotic_skin.sensor.html">robotic_skin.sensor package</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="robotic_skin.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="robotic_skin.html#module-robotic_skin.const">robotic_skin.const module</a></li>
<li class="toctree-l2"><a class="reference internal" href="robotic_skin.html#module-robotic_skin">Module contents</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">robotic_skin</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="robotic_skin.html">robotic_skin package</a> &raquo;</li>
        
      <li>robotic_skin.calibration package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/robotic_skin.calibration.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="robotic-skin-calibration-package">
<h1>robotic_skin.calibration package<a class="headerlink" href="#robotic-skin-calibration-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-robotic_skin.calibration.accel_position">
<span id="robotic-skin-calibration-accel-position-module"></span><h2>robotic_skin.calibration.accel_position module<a class="headerlink" href="#module-robotic_skin.calibration.accel_position" title="Permalink to this headline">¶</a></h2>
<p>Module for Kinematics Estimation.</p>
<dl class="class">
<dt id="robotic_skin.calibration.accel_position.KinematicEstimator">
<em class="property">class </em><code class="sig-prename descclassname">robotic_skin.calibration.accel_position.</code><code class="sig-name descname">KinematicEstimator</code><span class="sig-paren">(</span><em class="sig-param">data</em>, <em class="sig-param">dhparams=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/robotic_skin/calibration/accel_position.html#KinematicEstimator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#robotic_skin.calibration.accel_position.KinematicEstimator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Class for estimating the kinematics of the arm
and sensor unit positions.</p>
<dl class="method">
<dt id="robotic_skin.calibration.accel_position.KinematicEstimator.accelerometer_position">
<code class="sig-name descname">accelerometer_position</code><span class="sig-paren">(</span><em class="sig-param">t</em>, <em class="sig-param">Tdofs</em>, <em class="sig-param">Tjoints</em>, <em class="sig-param">Tdof2su</em>, <em class="sig-param">d</em>, <em class="sig-param">curr_w</em>, <em class="sig-param">max_w</em>, <em class="sig-param">joint_angle_func</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/robotic_skin/calibration/accel_position.html#KinematicEstimator.accelerometer_position"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#robotic_skin.calibration.accel_position.KinematicEstimator.accelerometer_position" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute ith accelerometer position excited by joint d in pose p at time t</p>
<dl class="simple">
<dt>At pose p, let o be a joint and x be a sensor unit, then it looks like</dt><dd><p>d       i                     dth joint and ith accelerometer</p>
</dd>
<dt><a href="#id1"><span class="problematic" id="id2">|</span></a>o-x-o      -x-o      -x-o      -x-</dt><dd><p>-x-o/    -x-o/    -x-o/</p>
</dd>
</dl>
<p>1   2    3    4    5    6    7         th joint
1    2    3    4    5    6    7      th sensor</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>d</strong> (<em>int</em>) – dth excited joint</p></li>
<li><p><strong>Tdof2su</strong> (<a class="reference internal" href="#robotic_skin.calibration.utils.TransMat" title="robotic_skin.calibration.utils.TransMat"><em>TransMat</em></a>) – Transformation matrix from the last DoF (Virtual DoF) to Sensor Unit</p></li>
<li><p><strong>Tdofs</strong> (<em>list of TransMat</em>) – Transformation Matrices between Dofs</p></li>
<li><p><strong>Tjoints</strong> (<em>list of TransformationMatrix</em>) – Tranformation Matrices of all joints in Pose p
Tjoint = [T(th_1), T(th_2), …, T(th_n)] for n joints</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>position</strong> – Position of the resulting transformation</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.array</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="robotic_skin.calibration.accel_position.KinematicEstimator.dynamic_error_function">
<code class="sig-name descname">dynamic_error_function</code><span class="sig-paren">(</span><em class="sig-param">i</em>, <em class="sig-param">Tdofs</em>, <em class="sig-param">Tdof2su</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/robotic_skin/calibration/accel_position.html#KinematicEstimator.dynamic_error_function"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#robotic_skin.calibration.accel_position.KinematicEstimator.dynamic_error_function" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute errors between estimated and measured max acceleration for sensor i</p>
<div class="math notranslate nohighlight">
\[`\Sigma_{p=1}^P\Sigma_{d=i-3, i&gt;0}^i {}^{SU_i}|a_{max}^{model} - a_{max}^{measured}|_{i,d,p}^2`\]</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>i</strong> (<em>int</em>) – ith sensor</p></li>
<li><p><strong>Tdof2su</strong> (<a class="reference internal" href="#robotic_skin.calibration.utils.TransMat" title="robotic_skin.calibration.utils.TransMat"><em>TransMat</em></a>) – Transformation matrix from the last DoF (Virtual DoF) to Sensor Unit</p></li>
<li><p><strong>Tdofs</strong> (<em>list of TransMat</em>) – Transformation Matrices between Dofs</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>e2</strong> – Dynamic Error</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="robotic_skin.calibration.accel_position.KinematicEstimator.error_function">
<code class="sig-name descname">error_function</code><span class="sig-paren">(</span><em class="sig-param">params</em>, <em class="sig-param">grad</em>, <em class="sig-param">i</em>, <em class="sig-param">Tdofs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/robotic_skin/calibration/accel_position.html#KinematicEstimator.error_function"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#robotic_skin.calibration.accel_position.KinematicEstimator.error_function" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes an error e_T = e_1 + e_2 from current parameters</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>params</strong> (<em>np.ndarray</em>) – Current estimated parameters</p></li>
<li><p><strong>i</strong> (<em>int</em>) – ith sensor</p></li>
<li><p><strong>Tdofs</strong> (<em>list of TransMat</em>) – Transformation Matrices between Dofs</p></li>
<li><p><strong>grad</strong> (<em>np.ndarray</em>) – Gradient, but we do not use any gradient information
(We could in the future)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>error</strong> – Error between measured values and estimated model outputs</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="robotic_skin.calibration.accel_position.KinematicEstimator.estimate_acceleration">
<code class="sig-name descname">estimate_acceleration</code><span class="sig-paren">(</span><em class="sig-param">Tdofs</em>, <em class="sig-param">Tjoints</em>, <em class="sig-param">Tdof2su</em>, <em class="sig-param">d</em>, <em class="sig-param">curr_w</em>, <em class="sig-param">max_w</em>, <em class="sig-param">joint_angle_func</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/robotic_skin/calibration/accel_position.html#KinematicEstimator.estimate_acceleration"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#robotic_skin.calibration.accel_position.KinematicEstimator.estimate_acceleration" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div><p>Compute an acceleration value from positions.
.. math:: <a href="#id3"><span class="problematic" id="id4">`</span></a>a =</p>
</div></blockquote>
<p>rac{f({Delta t}) + f({Delta t) - 2 f(0)}{h^2}`</p>
<blockquote>
<div><p>This equation came from Taylor Expansion.
.. math:: f(t+{Delta t}) = f(t) + hf^{prime}(t) +</p>
</div></blockquote>
<dl>
<dt>rac{h^2}{2}f^{primeprime}(t)</dt><dd><div class="math notranslate nohighlight">
\[f(t-{\Delta t}) = f(t) - hf^{\prime}(t) +\]</div>
</dd>
</dl>
<p>rac{h^2}{2}f^{primeprime}(t)</p>
<blockquote>
<div><p>Add both equations and plug t=0 to get the above equation</p>
<dl class="simple">
<dt>d: int</dt><dd><p>dth excited joint</p>
</dd>
<dt>Tdof2su: TransMat</dt><dd><p>Transformation matrix from the last DoF (Virtual DoF) to Sensor Unit</p>
</dd>
<dt>Tdofs: list of TransMat</dt><dd><p>Transformation Matrices between Dofs</p>
</dd>
<dt>Tjoints: list of TransMat</dt><dd><p>Transformation Matrices (Rotation Matrix)</p>
</dd>
</dl>
<dl class="simple">
<dt>acceleration: np.array</dt><dd><p>Acceleration computed from positions</p>
</dd>
</dl>
</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="robotic_skin.calibration.accel_position.KinematicEstimator.estimate_imu_q">
<code class="sig-name descname">estimate_imu_q</code><span class="sig-paren">(</span><em class="sig-param">Tdofs</em>, <em class="sig-param">Tdof2su</em>, <em class="sig-param">joints</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/robotic_skin/calibration/accel_position.html#KinematicEstimator.estimate_imu_q"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#robotic_skin.calibration.accel_position.KinematicEstimator.estimate_imu_q" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="robotic_skin.calibration.accel_position.KinematicEstimator.get_all_accelerometer_positions">
<code class="sig-name descname">get_all_accelerometer_positions</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/robotic_skin/calibration/accel_position.html#KinematicEstimator.get_all_accelerometer_positions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#robotic_skin.calibration.accel_position.KinematicEstimator.get_all_accelerometer_positions" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns all accelerometer positions in the initial position</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>positions</strong> – All accelerometer positions</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="robotic_skin.calibration.accel_position.KinematicEstimator.get_an_accelerometer_position">
<code class="sig-name descname">get_an_accelerometer_position</code><span class="sig-paren">(</span><em class="sig-param">Tdofs</em>, <em class="sig-param">Tdof2su</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/robotic_skin/calibration/accel_position.html#KinematicEstimator.get_an_accelerometer_position"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#robotic_skin.calibration.accel_position.KinematicEstimator.get_an_accelerometer_position" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="robotic_skin.calibration.accel_position.KinematicEstimator.get_i_accelerometer_position">
<code class="sig-name descname">get_i_accelerometer_position</code><span class="sig-paren">(</span><em class="sig-param">i_sensor</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/robotic_skin/calibration/accel_position.html#KinematicEstimator.get_i_accelerometer_position"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#robotic_skin.calibration.accel_position.KinematicEstimator.get_i_accelerometer_position" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="robotic_skin.calibration.accel_position.KinematicEstimator.get_tmat">
<code class="sig-name descname">get_tmat</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/robotic_skin/calibration/accel_position.html#KinematicEstimator.get_tmat"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#robotic_skin.calibration.accel_position.KinematicEstimator.get_tmat" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns lists of transformation matrices</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><em>list of TransMat</em> – Transformation Matrices between a DoF and its next DoF</p></li>
<li><p><em>list of TransMat</em> – Transformation Matrices between a DoF and its virtual DoF</p></li>
<li><p><em>list of TransMat</em> – Transformation Matrices between a virtual DoF and its SU</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="robotic_skin.calibration.accel_position.KinematicEstimator.optimize">
<code class="sig-name descname">optimize</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/robotic_skin/calibration/accel_position.html#KinematicEstimator.optimize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#robotic_skin.calibration.accel_position.KinematicEstimator.optimize" title="Permalink to this definition">¶</a></dt>
<dd><p>Optimizes DH parameters using the training data.
The error function is defined by the error between the measured accelerations
and estimated accelerations.
Nonlinear Optimizer will optimize the parameters by decreasing the error.
There are two different types of error: static and dynamic motion.
For further explanation, read each function.</p>
</dd></dl>

<dl class="method">
<dt id="robotic_skin.calibration.accel_position.KinematicEstimator.plot_param_diffs">
<code class="sig-name descname">plot_param_diffs</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/robotic_skin/calibration/accel_position.html#KinematicEstimator.plot_param_diffs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#robotic_skin.calibration.accel_position.KinematicEstimator.plot_param_diffs" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="robotic_skin.calibration.accel_position.KinematicEstimator.rotation_error_function">
<code class="sig-name descname">rotation_error_function</code><span class="sig-paren">(</span><em class="sig-param">i</em>, <em class="sig-param">Tdofs</em>, <em class="sig-param">Tdof2su</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/robotic_skin/calibration/accel_position.html#KinematicEstimator.rotation_error_function"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#robotic_skin.calibration.accel_position.KinematicEstimator.rotation_error_function" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>i</strong> (<em>int</em>) – ith sensor</p></li>
<li><p><strong>Tdof2su</strong> (<a class="reference internal" href="#robotic_skin.calibration.utils.TransMat" title="robotic_skin.calibration.utils.TransMat"><em>TransMat</em></a>) – Transformation matrix from the last DoF (Virtual DoF) to Sensor Unit</p></li>
<li><p><strong>Tdofs</strong> (<em>list of TransMat</em>) – Transformation Matrices between Dofs</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>e1</strong> – Static Error</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="robotic_skin.calibration.accel_position.KinematicEstimator.static_error_function">
<code class="sig-name descname">static_error_function</code><span class="sig-paren">(</span><em class="sig-param">i</em>, <em class="sig-param">Tdofs</em>, <em class="sig-param">Tdof2su</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/robotic_skin/calibration/accel_position.html#KinematicEstimator.static_error_function"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#robotic_skin.calibration.accel_position.KinematicEstimator.static_error_function" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes static error for ith accelerometer.
Static error is an deviation of the gravity vector for p positions.</p>
<p>This function implements Equation 15 in the paper.
.. math:: <cite>e_1 = Sigma_{p=1}^P |{}^{RS}g_{N,p} - Sigma_{p=1}^P {}^{RS}g_{N,p}|^2</cite>
where
.. math:: <cite>{}^{RS}g_{N,p} = {}^{RS}R_{SU_N}^{mod,p} {}^{SU_N}g_{N,p}</cite></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>i</strong> (<em>int</em>) – ith sensor</p></li>
<li><p><strong>Tdof2su</strong> (<a class="reference internal" href="#robotic_skin.calibration.utils.TransMat" title="robotic_skin.calibration.utils.TransMat"><em>TransMat</em></a>) – Transformation matrix from the last DoF (Virtual DoF) to Sensor Unit</p></li>
<li><p><strong>Tdofs</strong> (<em>list of TransMat</em>) – Transformation Matrices between Dofs</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>e1</strong> – Static Error</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="robotic_skin.calibration.accel_position.constant_velocity_joint_angle">
<code class="sig-prename descclassname">robotic_skin.calibration.accel_position.</code><code class="sig-name descname">constant_velocity_joint_angle</code><span class="sig-paren">(</span><em class="sig-param">curr_w</em>, <em class="sig-param">max_w</em>, <em class="sig-param">t</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/robotic_skin/calibration/accel_position.html#constant_velocity_joint_angle"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#robotic_skin.calibration.accel_position.constant_velocity_joint_angle" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="robotic_skin.calibration.accel_position.load_data">
<code class="sig-prename descclassname">robotic_skin.calibration.accel_position.</code><code class="sig-name descname">load_data</code><span class="sig-paren">(</span><em class="sig-param">robot</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/robotic_skin/calibration/accel_position.html#load_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#robotic_skin.calibration.accel_position.load_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Function for collecting acceleration data with poses</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>data</strong> – Data includes static and dynamic accelerations data</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Data</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="robotic_skin.calibration.accel_position.load_dhparams">
<code class="sig-prename descclassname">robotic_skin.calibration.accel_position.</code><code class="sig-name descname">load_dhparams</code><span class="sig-paren">(</span><em class="sig-param">robot</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/robotic_skin/calibration/accel_position.html#load_dhparams"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#robotic_skin.calibration.accel_position.load_dhparams" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="robotic_skin.calibration.accel_position.max_acceleration_joint_angle">
<code class="sig-prename descclassname">robotic_skin.calibration.accel_position.</code><code class="sig-name descname">max_acceleration_joint_angle</code><span class="sig-paren">(</span><em class="sig-param">curr_w</em>, <em class="sig-param">max_w</em>, <em class="sig-param">t</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/robotic_skin/calibration/accel_position.html#max_acceleration_joint_angle"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#robotic_skin.calibration.accel_position.max_acceleration_joint_angle" title="Permalink to this definition">¶</a></dt>
<dd><p>max acceleration along a joint angle.</p>
</dd></dl>

</div>
<div class="section" id="module-robotic_skin.calibration.utils">
<span id="robotic-skin-calibration-utils-module"></span><h2>robotic_skin.calibration.utils module<a class="headerlink" href="#module-robotic_skin.calibration.utils" title="Permalink to this headline">¶</a></h2>
<p>Utilities module for Robotic Skin.</p>
<dl class="class">
<dt id="robotic_skin.calibration.utils.ParameterManager">
<em class="property">class </em><code class="sig-prename descclassname">robotic_skin.calibration.utils.</code><code class="sig-name descname">ParameterManager</code><span class="sig-paren">(</span><em class="sig-param">n_joint</em>, <em class="sig-param">bounds</em>, <em class="sig-param">bounds_su</em>, <em class="sig-param">dhparams=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/robotic_skin/calibration/utils.html#ParameterManager"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#robotic_skin.calibration.utils.ParameterManager" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Class for managing DH parameters</p>
<dl class="method">
<dt id="robotic_skin.calibration.utils.ParameterManager.get_params_at">
<code class="sig-name descname">get_params_at</code><span class="sig-paren">(</span><em class="sig-param">i</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/robotic_skin/calibration/utils.html#ParameterManager.get_params_at"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#robotic_skin.calibration.utils.ParameterManager.get_params_at" title="Permalink to this definition">¶</a></dt>
<dd><p>if n_joint is 7 DoF i = 0, 1, …, 6</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>i</strong> (<em>int</em>) – ith joint (ith sensor)</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>params</strong> – Next DH parameters to be optimized</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.array</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="robotic_skin.calibration.utils.ParameterManager.get_tmat_until">
<code class="sig-name descname">get_tmat_until</code><span class="sig-paren">(</span><em class="sig-param">i</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/robotic_skin/calibration/utils.html#ParameterManager.get_tmat_until"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#robotic_skin.calibration.utils.ParameterManager.get_tmat_until" title="Permalink to this definition">¶</a></dt>
<dd><p>get transformation matrices when optimizing ith joint (sensor)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>i</strong> (<em>int</em>) – ith joint (sensor)</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>list of TransMat</em> – Transformation Matrices between DoFs</p></li>
<li><p><em>list of TransMat</em> – Transformation Rotation Matrices for all joints</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="robotic_skin.calibration.utils.ParameterManager.set_params_at">
<code class="sig-name descname">set_params_at</code><span class="sig-paren">(</span><em class="sig-param">i</em>, <em class="sig-param">params</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/robotic_skin/calibration/utils.html#ParameterManager.set_params_at"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#robotic_skin.calibration.utils.ParameterManager.set_params_at" title="Permalink to this definition">¶</a></dt>
<dd><p>Set DH parameters</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>int</strong> (<em>i</em>) – ith joint (sensor)</p></li>
<li><p><strong>parmas</strong> (<em>np.array</em>) – DH Parameters</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="robotic_skin.calibration.utils.TransMat">
<em class="property">class </em><code class="sig-prename descclassname">robotic_skin.calibration.utils.</code><code class="sig-name descname">TransMat</code><span class="sig-paren">(</span><em class="sig-param">params=None</em>, <em class="sig-param">bounds=None</em>, <em class="sig-param">mat=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/robotic_skin/calibration/utils.html#TransMat"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#robotic_skin.calibration.utils.TransMat" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Class for Transformation Matrix
Manages all its parameters and computation
It also outputs Rotation Matrix and Position of the transformed result</p>
<dl class="method">
<dt id="robotic_skin.calibration.utils.TransMat.R">
<em class="property">property </em><code class="sig-name descname">R</code><a class="headerlink" href="#robotic_skin.calibration.utils.TransMat.R" title="Permalink to this definition">¶</a></dt>
<dd><p>Rotation Matrix</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Rotation Matrix</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="robotic_skin.calibration.utils.TransMat.check_params">
<code class="sig-name descname">check_params</code><span class="sig-paren">(</span><em class="sig-param">params</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/robotic_skin/calibration/utils.html#TransMat.check_params"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#robotic_skin.calibration.utils.TransMat.check_params" title="Permalink to this definition">¶</a></dt>
<dd><p>Check the size of the given dh parameters
Complement other parameters according to the size</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>params</strong> (<em>np.array</em>) – DH Parameters</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="robotic_skin.calibration.utils.TransMat.dot">
<code class="sig-name descname">dot</code><span class="sig-paren">(</span><em class="sig-param">T</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/robotic_skin/calibration/utils.html#TransMat.dot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#robotic_skin.calibration.utils.TransMat.dot" title="Permalink to this definition">¶</a></dt>
<dd><p>In our implementation, we use * for dot product</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>mat</strong> (<em>np.ndarray</em>) – 4 by 4 ndarray transformation matrix</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>T</strong> – Resulting transformation matrix from dot products
of two transformation matrices</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#robotic_skin.calibration.utils.TransMat" title="robotic_skin.calibration.utils.TransMat">TransMat</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="robotic_skin.calibration.utils.TransMat.parameters">
<em class="property">property </em><code class="sig-name descname">parameters</code><a class="headerlink" href="#robotic_skin.calibration.utils.TransMat.parameters" title="Permalink to this definition">¶</a></dt>
<dd><p>returns: DH parameters of this transformation matrix
:rtype: np.array</p>
</dd></dl>

<dl class="method">
<dt id="robotic_skin.calibration.utils.TransMat.position">
<em class="property">property </em><code class="sig-name descname">position</code><a class="headerlink" href="#robotic_skin.calibration.utils.TransMat.position" title="Permalink to this definition">¶</a></dt>
<dd><p>Position as a result of the transformation</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Position of the resulting transformation</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="robotic_skin.calibration.utils.TransMat.set_params">
<code class="sig-name descname">set_params</code><span class="sig-paren">(</span><em class="sig-param">params</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/robotic_skin/calibration/utils.html#TransMat.set_params"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#robotic_skin.calibration.utils.TransMat.set_params" title="Permalink to this definition">¶</a></dt>
<dd><p>Set parameters that have been optimized</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>params</strong> (<em>np.array</em>) – DH parameters</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="robotic_skin.calibration.utils.TransMat.transformation_matrix">
<code class="sig-name descname">transformation_matrix</code><span class="sig-paren">(</span><em class="sig-param">th</em>, <em class="sig-param">d</em>, <em class="sig-param">a</em>, <em class="sig-param">al</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/robotic_skin/calibration/utils.html#TransMat.transformation_matrix"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#robotic_skin.calibration.utils.TransMat.transformation_matrix" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div><p>Create a transformation matrix
DH Parameters are defined with only 4 parameters.
2 Translational parameters and 2 Rotations parameters.
Here, we follow the “Modified DH Parameter” notation and
not the original classic DH Parameter invnted by Denavit and Hartenberg.</p>
<p>From (n-1)th coordinate frame,
1. Rotate for al [rad] around x axis (Rx).
2. Displace for a [m] along x axis (Tx).
3. Rotate for th [rad] around z axis (Rz)
4. Displace for d [m] along z axis (Tz)
to get to the nth coordinate frame in this order.</p>
<p>..math:: {}^{n-1}_{n}T = Rx * Tx * Rz * Tz
..math:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>\left[
egin{array}{c|c}
    {}^{n-1}_{n} R &amp; {}^{n-1}_{n}P \
    \hline
    0 &amp; 1
\end{array}
</pre></div>
</div>
</div></blockquote>
<p>ight]</p>
<blockquote>
<div><blockquote>
<div><p>The superscript represents which frame the variable is in,
and the subscript represents from which frame the variable is stated.
For example, <span class="math notranslate nohighlight">\({}^{0}_{1}P\)</span> represents the position of the 1st link (frame)
in the the world frame 0. So if you want to compute the end-effector’s position
in the world frame, you write as <span class="math notranslate nohighlight">\({}^{0}_{6}P\)</span>.</p>
<p>If you want to rotate the gravity vector from world (frame 0) to SU 6,
you write as <span class="math notranslate nohighlight">\({}^{SU_6}g = {}^{SU_6}_{0}R * {}^{0}g\)</span>.
You can compute <span class="math notranslate nohighlight">\({}^{SU_6}_{0}R\)</span>  by,</p>
<dl class="simple">
<dt>..math::</dt><dd><p>{}^{0}_{SU_6}T = {}^{0}_{1}T * {}^{1}_{2}T * … * {}^{6}_{SU_6}T
{}^{SU_6}_{0}R = ({}^{0}_{SU_6}T).R.T</p>
</dd>
</dl>
</div></blockquote>
<dl class="simple">
<dt>Note that</dt><dd><p>Rz * Tz = Tz * Rz
Rx * Tx = Tx * Rx</p>
</dd>
</dl>
<p>Source:
- <a class="reference external" href="http://www4.cs.umanitoba.ca/~jacky/Robotics/Papers/spong_kinematics.pdf">http://www4.cs.umanitoba.ca/~jacky/Robotics/Papers/spong_kinematics.pdf</a>
- <a class="reference external" href="https://en.wikipedia.org/wiki/Denavit%E2%80%93Hartenberg_parameters#Modified_DH_parameters">https://en.wikipedia.org/wiki/Denavit%E2%80%93Hartenberg_parameters#Modified_DH_parameters</a></p>
<dl class="simple">
<dt>th:</dt><dd><p>Rotation theta around z axis (rad)</p>
</dd>
<dt>d:</dt><dd><p>Displacement relative to z axis (m)</p>
</dd>
<dt>a:</dt><dd><p>Displacement relative to x axis (m)</p>
</dd>
<dt>al:</dt><dd><p>Rotation alpha around x axis (rad)</p>
</dd>
</dl>
<dl class="simple">
<dt>np.ndarray</dt><dd><p>transformation matrix
returns 4x4 matrix of the form</p>
</dd>
</dl>
</div></blockquote>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="robotic_skin.calibration.utils.n2s">
<code class="sig-prename descclassname">robotic_skin.calibration.utils.</code><code class="sig-name descname">n2s</code><span class="sig-paren">(</span><em class="sig-param">x</em>, <em class="sig-param">precision=2</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/robotic_skin/calibration/utils.html#n2s"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#robotic_skin.calibration.utils.n2s" title="Permalink to this definition">¶</a></dt>
<dd><p>converts numpy array to string.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<cite>np.array</cite>) – The numpy array to convert to a string.</p></li>
<li><p><strong>precision</strong> (<cite>int</cite>) – The precision desired on each entry in the array.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="robotic_skin.calibration.utils.pyquat_to_numpy">
<code class="sig-prename descclassname">robotic_skin.calibration.utils.</code><code class="sig-name descname">pyquat_to_numpy</code><span class="sig-paren">(</span><em class="sig-param">q</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/robotic_skin/calibration/utils.html#pyquat_to_numpy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#robotic_skin.calibration.utils.pyquat_to_numpy" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a pyqt quaternion to a numpy array.</p>
</dd></dl>

<dl class="function">
<dt id="robotic_skin.calibration.utils.pyquat_to_tfquat">
<code class="sig-prename descclassname">robotic_skin.calibration.utils.</code><code class="sig-name descname">pyquat_to_tfquat</code><span class="sig-paren">(</span><em class="sig-param">q</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/robotic_skin/calibration/utils.html#pyquat_to_tfquat"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#robotic_skin.calibration.utils.pyquat_to_tfquat" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts a pyqt quaternion to a tf quaternion</p>
</dd></dl>

<dl class="function">
<dt id="robotic_skin.calibration.utils.quaternion_from_two_vectors">
<code class="sig-prename descclassname">robotic_skin.calibration.utils.</code><code class="sig-name descname">quaternion_from_two_vectors</code><span class="sig-paren">(</span><em class="sig-param">v1</em>, <em class="sig-param">v2</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/robotic_skin/calibration/utils.html#quaternion_from_two_vectors"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#robotic_skin.calibration.utils.quaternion_from_two_vectors" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a quaternion from two vectors.</p>
</dd></dl>

<dl class="function">
<dt id="robotic_skin.calibration.utils.quaternion_l2_distance">
<code class="sig-prename descclassname">robotic_skin.calibration.utils.</code><code class="sig-name descname">quaternion_l2_distance</code><span class="sig-paren">(</span><em class="sig-param">q1</em>, <em class="sig-param">q2</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/robotic_skin/calibration/utils.html#quaternion_l2_distance"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#robotic_skin.calibration.utils.quaternion_l2_distance" title="Permalink to this definition">¶</a></dt>
<dd><p>A metric for computing the distance
between 2 quaternions.
sources:
- <a class="reference external" href="https://fgiesen.wordpress.com/2013/01/07/small-note-on-quaternion-distance-metrics/">https://fgiesen.wordpress.com/2013/01/07/small-note-on-quaternion-distance-metrics/</a>
- <a class="reference external" href="http://kieranwynn.github.io/pyquaternion/#accessing-individual-elements">http://kieranwynn.github.io/pyquaternion/#accessing-individual-elements</a></p>
</dd></dl>

<dl class="function">
<dt id="robotic_skin.calibration.utils.tfquat_to_pyquat">
<code class="sig-prename descclassname">robotic_skin.calibration.utils.</code><code class="sig-name descname">tfquat_to_pyquat</code><span class="sig-paren">(</span><em class="sig-param">q</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/robotic_skin/calibration/utils.html#tfquat_to_pyquat"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#robotic_skin.calibration.utils.tfquat_to_pyquat" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts a tf quaternion to a pyqt quaternion</p>
</dd></dl>

</div>
<div class="section" id="module-robotic_skin.calibration">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-robotic_skin.calibration" title="Permalink to this headline">¶</a></h2>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="robotic_skin.sensor.html" class="btn btn-neutral float-right" title="robotic_skin.sensor package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="robotic_skin.algorithm.html" class="btn btn-neutral float-left" title="robotic_skin.algorithm package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Kandai Watanabe

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>